import requests
import json

li=["Title","Plot","Year","imdbRating","imdbVotes","tomatoConsensus",
    "tomatoMeter","tomatoRating","tomatoUserRating","tomatoUserMeter"]

li_show=["Title","Plot","Year","imdbRating","tomatoMeter"]

def search(movie):
    url = "http://www.omdbapi.com/?"

    try:
        r = requests.post(url,params={"tomatoes":"true","t":movie})
	
	except:
		
	    print("Network Error !")
	    search()
		return 0

	jformat =json.loads(r.text)

	return jformat

class MovieData(object):

    def __init__(self,jformat):
        self.jformat=jformat
		self.data = {}
		try:
            self.data = {
			"Title":self.jformat["Title"],
			"Plot":self.jformat["Plot"],
			"Year":self.jformat["Year"],
			"imdbRating":self.jformat["imdbRating"],
			"tomatoMeter":self.jformat["tomatoMeter"],
			"tomatoRating":self.jformat["tomatoRating"],
			}

		except :
		    self.data = 0

    def getData(self):
        return self.data


def getInfo(movie_name):
    count = 0
    result = {}
    movieObject = MovieData(search(movie_name))
    while count <= 3:
        result = movieObject.getData()
        if result == 0:
            count = count + 1
        else
            return result
    return result

